# 1.算术基本定理
-------

> 首先将所有数以了形式给出，标出所有质数，在大量数的背景下质数的分布会呈现一定的规律。

- 欧几里得认识到所有数都可分为质数和合数
- 将一个合数分解，最后总会得到若干个质数

>即任何数字都能表示为一组质数

e.g 9=3+3+3
15=5+5+5
- 以上即为算术基本定理。
- 因数分解：30=2*3*5
- 这可以被认为是一种唯一的组合，因为没有其他质数相乘得30.
- 任意数字有且只有一种质因数分解，每种数字可以描述为一种不同的“🔒“，而”🔑“就是其质因数的组合。

# 2.公开密钥
---
- 传输数据双方需要商定一个随机数作为密钥，而不能让第三方监听到。
-  第三方总能弄到一份传输内容
- 🔒的原理：将两个数混在一起很容易，但仅从这个混合物中分别出原来的两个数就很难
- 即单向性。

1. 先对公开的一个密钥达成一致
2.双方随机选取另一个私有密钥
3.发出方传送一份基于自己的两个密钥的混合文本
4.接收方回传一份基于自己的两个密钥的混合文本
5.双方将自己的私钥混合=进接收到的样本中
6.得到最后的密文。

- 监听者只要得不到任一个私钥就得不到密文。

# 3.离散对数
---
### 模算术/时钟算术
- 也就是取余。
e.g. 46 mod 12=10
- 下面用质数做模数，比如17
- 17 的原根（primitive root）是3
- 在取3 的不同幂次做对17 的取余中，结果是均匀分布的。这就防止了用概率来破解。
- 这个的反向过程十分困难，只能用暴力破解法。（3的多少次方除17余12？）
- 当质数是几百位长的时候暴力解密是不切实际的。

# 4.迪菲·赫尔曼密钥
---
1.双方就质模数和生成元达成一致（17和3）
2.发送方计算3的15次方对应17取余，将结果b发给接收者
3.接收方计算自己的私钥的相应结果a（3的13次方对应17取余),发给发送者。
4.发送者将a的（自己的密钥，即15）次方对17取余，得到共享密钥（10）。
5.接收者将b的（自己的密钥，即13）次方对17取余，得到共享密钥（10）。
为什么这两个运算是等价的呢？因为被取余的数是一样的（3的13次方的15次方等于3的15次方的13次方）
6.共享密钥即为要传送的数据铭文，然而整个过程在明面上传输的部分的数据形式是不可解的。
7.而两边的私钥都是随机生成且不发送给任何人的，增加了安全性。
# 5. RSA密钥-公钥加密-非对称加密
----
- 发起者保有一个密钥，将一个”打开的锁交给即将开始数据传输的人“
- 此人按照锁将信息加密传输回发起者
- 发起者利用自己的密钥解锁获得信息
------
- 密钥分为两部分，加密和解密
- 要求依然是单向函数
- 这里用的依然是时钟运算
- 其中指数和取余数是公开的，指数的底是要加密的信息
- 发起者解锁的密钥，trapdoor，就是让这个逆运算变得容易的信息
-  需要对结果进行d次幂运算以解除加密运算，即c的d次方对N取余等于m。
- 发起者将 指数、除数发送至接收者，并让接收者将要传输的数据按照规则加密。
- trapdoor就是使明文c解除加密运算的指数d。
- 加密和解密过程合起来就是
> ((m)^e)^d mod N =m

- e 加密公钥
- d 解密私钥
- 这里需要第二个单向函数用来求d。
### 用来求解密密钥d的单向函数
---
- 每个合数对应且只对应一种质因数分解方式（推广一下，质数的可分解为1*原数，所以所有的数都有且只有一种质因数（包括1）分解方案。
1. 发起者随机构建一个150位以上的质数p1
2. 再生成一个位数相等的质数p2
3. p1*p2得到合数N
4.将N作为公钥发布，隐藏私钥p1和p2
5.找到一个依赖于N质因数分解方案的函数，即欧拉函数。
# 6.欧拉函数
- 在定义中，欧拉函数是指小于或者等于n的正整数中和n互质的数目。
- 实际上是模n的同余类所构成的乘法群（？）
- 计算方法是=(p1-1)*(p2-1)
- 其他方法几乎无解
- 所以这个函数就是只对两个质因数【开放】的函数。
- 欧拉定理：欧拉函数和模幂运算的关系
> m^(Φ(n))=1 mod n
> m*(m)^(k*Φ(n))=m mod n
> m^(k*Φ(n)+1)=m mod n

- 通过以上计算，当知道n的质因数分解方案时可通过
> d=(k*Φ(n)+1)/e

计算使加密过程逆向的参数d。
[![私钥的生成过程](https://s1.ax1x.com/2018/10/03/i3DFYQ.png)](https://imgchr.com/i/i3DFYQ)
- 只传送n和e，作为公钥。
- 上锁过程是计算m的e次方对n取余得c回传。
- 发起者将c乘d次幂，并对n取余得到m。
- 要得到d只能计算Φ（n），而这只能通过质因数分解得到。
---
